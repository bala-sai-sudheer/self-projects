<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foodie | Hyderabad Food Delivery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Header -->
    <%- include('partials/header') %>

    <!-- Deepavali Banner -->
    <% if (showDeepavaliBanner) { %>
    <div class="deepavali-banner">
        <div class="deepavali-content">
            <h2>Deepavali Special! ðŸª”</h2>
            <p>Celebrate the Festival of Lights with delicious food! Get flat 40% OFF on all orders above â‚¹500</p>
            <div class="discount-badge">Use Code: DEEPAVALI40</div>
            <p style="margin-top: 10px; font-size: 14px;">Offer valid until 15th November</p>
        </div>
    </div>
    <% } %>

    <!-- Hero Banner -->
    <section class="hero">
        <div class="hero-banner">
            <h1>Hyderabad's Finest Food Delivery</h1>
            <p>Order from 5000+ restaurants in Hyderabad. Fast delivery right to your doorstep.</p>
        </div>
    </section>

    <!-- Categories -->
    <section class="categories">
        <h2 class="section-title">Popular Categories in Hyderabad</h2>
        <div class="categories-container">
            <% categories.forEach(category => { %>
            <div class="category-card <%= activeFilters.category === category.category ? 'active' : '' %>"
                 data-category="<%= category.category %>">
                <div class="category-icon">
                    <i class="<%= category.icon %>"></i>
                </div>
                <p><%= category.name %></p>
            </div>
            <% }); %>
        </div>
    </section>

    <!-- Filters -->
    <section class="filters">
        <h2 class="section-title">Quick Filters</h2>
        <div class="filters-container">
            <button class="filter-btn <%= !Object.values(activeFilters).some(f => f) ? 'active' : '' %>"
                    data-filter="all">All Restaurants</button>
            <button class="filter-btn <%= activeFilters.pureVeg ? 'active' : '' %>"
                    data-filter="pureVeg">Pure Veg</button>
            <button class="filter-btn <%= activeFilters.fastDelivery ? 'active' : '' %>"
                    data-filter="fastDelivery">Fast Delivery</button>
            <button class="filter-btn <%= activeFilters.highRating ? 'active' : '' %>"
                    data-filter="highRating">Rating 4.0+</button>
            <button class="filter-btn <%= activeFilters.hasOffers ? 'active' : '' %>"
                    data-filter="hasOffers">Deepavali Offers</button>
            <button class="filter-btn <%= activeFilters.priceRange === 'low' ? 'active' : '' %>"
                    data-filter="lowPrice">Less than â‚¹300</button>
            <button class="filter-btn <%= activeFilters.priceRange === 'mid' ? 'active' : '' %>"
                    data-filter="midPrice">â‚¹300-â‚¹600</button>
            <button class="filter-btn <%= activeFilters.priceRange === 'high' ? 'active' : '' %>"
                    data-filter="highPrice">Above â‚¹600</button>
        </div>
    </section>

    <!-- Restaurants -->
    <section class="restaurants">
        <h2 class="section-title">Top Restaurants in Hyderabad</h2>

        <div class="loading">
            <div class="spinner"></div>
            <p>Loading restaurants...</p>
        </div>

        <div class="restaurants-container">
            <% restaurants.forEach(restaurant => { %>
            <div class="restaurant-card" data-id="<%= restaurant.id %>">
                <img src="<%= restaurant.image %>" alt="<%= restaurant.name %>" class="restaurant-img">
                <div class="restaurant-info">
                    <h3 class="restaurant-name"><%= restaurant.name %></h3>
                    <p class="restaurant-cuisine"><%= restaurant.cuisine %></p>
                    <div class="restaurant-details">
                        <div class="rating">
                            <i class="fas fa-star"></i>
                            <span><%= restaurant.rating %></span>
                        </div>
                        <div class="delivery-time"><%= restaurant.deliveryTime %></div>
                    </div>
                    <div class="price"><%= restaurant.price %></div>
                    <% if (restaurant.hasOffers) { %>
                    <div style="color: var(--deepavali-red); font-weight: bold; font-size: 12px; margin-top: 5px;">
                        <i class="fas fa-gift"></i> Deepavali Offer Available
                    </div>
                    <% } %>
                    <div class="restaurant-actions">
                        <button class="order-btn" onclick="orderFromRestaurant(<%= restaurant.id %>)">
                            <i class="fas fa-shopping-cart"></i> Order Now
                        </button>
                        <button class="view-btn" onclick="viewRestaurant(<%= restaurant.id %>)">
                            <i class="fas fa-eye"></i> View
                        </button>
                    </div>
                </div>
            </div>
            <% }); %>
        </div>
    </section>

    <!-- Footer -->
    <%- include('partials/footer') %>

    <script src="/js/app.js"></script>
</body>
</html>
